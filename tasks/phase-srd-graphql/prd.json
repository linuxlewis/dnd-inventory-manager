{
  "project": "DnD Helper",
  "branchName": "feat/srd-graphql",
  "description": "Replace static SRD JSON with live GraphQL queries to 5e-bits API using graphql-request + TanStack Query + codegen",
  "userStories": [
    {
      "id": "FE-030",
      "title": "Setup GraphQL Codegen",
      "description": "Install graphql, graphql-request, and @graphql-codegen packages. Create codegen.yml pointing to https://www.dnd5eapi.co/graphql schema. Add 'codegen' npm script. Run codegen to generate initial types.",
      "acceptanceCriteria": [
        "graphql and graphql-request in dependencies",
        "@graphql-codegen/* packages in devDependencies",
        "codegen.yml config file exists",
        "bun run codegen generates src/generated/graphql.ts",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "FE-031",
      "title": "Create SRD GraphQL Queries",
      "description": "Create src/api/srd/queries.graphql with SearchEquipment, SearchMagicItems, GetEquipmentByIndex, and GetMagicItemByIndex queries. Use inline fragments for equipment union types. Create src/api/srd/client.ts with GraphQLClient and getSdk export.",
      "acceptanceCriteria": [
        "queries.graphql file with 4 queries defined",
        "Queries handle Weapon/Armor/Gear union types with inline fragments",
        "client.ts exports srdApi with typed SDK methods",
        "bun run codegen succeeds after adding queries",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "FE-032",
      "title": "Create SRD React Query Hooks",
      "description": "Create src/api/srd/hooks.ts with useSrdSearch (combined equipment + magic items), useSrdEquipment (single item by index), useSrdMagicItem (single magic item by index). Use appropriate staleTime caching.",
      "acceptanceCriteria": [
        "useSrdSearch returns combined results from both queries",
        "Search only enabled when query >= 2 characters",
        "useSrdEquipment and useSrdMagicItem fetch single items",
        "staleTime set to 5+ minutes for search, 30+ for details",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "FE-033",
      "title": "Update AddItemModal to Use Live SRD",
      "description": "Modify AddItemModal.tsx to use useSrdSearch instead of the old static SRD API. Display both equipment and magic items in search results. Map SRD response to form fields when item selected.",
      "acceptanceCriteria": [
        "AddItemModal imports and uses useSrdSearch",
        "Search results show both equipment and magic items",
        "Selecting a result populates item form correctly",
        "Loading and empty states handled",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "FE-034",
      "title": "Remove Static SRD Data and Endpoints",
      "description": "Delete backend/app/data/*.json SRD files. Remove backend/app/routers/srd.py and its registration in main.py. Remove frontend/src/api/srd.ts (old REST client). Update any remaining imports.",
      "acceptanceCriteria": [
        "No JSON files in backend/app/data/ (keep directory if needed)",
        "backend/app/routers/srd.py deleted",
        "srd_router removed from main.py",
        "frontend/src/api/srd.ts deleted (old file)",
        "No import errors",
        "Backend tests pass (remove/update srd tests)",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    }
  ]
}
